<!DOCTYPE html>
<html>
<head>
  <title>Jogos da copa</title>
  <meta charset="utf-8">
  <link href="http://netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css" rel="stylesheet">
  <link href="http://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.min.css" rel="stylesheet">
  <link href="http://netdna.bootstrapcdn.com/bootswatch/3.1.1/yeti/bootstrap.min.css" rel="stylesheet">
  <link href="./css/flag-icon.css" rel="stylesheet">
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/2.1.0/jquery.min.js"></script>
  <script src="http://netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>
  <script src="http://cdnjs.cloudflare.com/ajax/libs/moment.js/2.6.0/moment.min.js"></script>
  <script src="http://cdnjs.cloudflare.com/ajax/libs/moment.js/2.6.0/lang/pt-br.js"></script>
  <style type="text/css">
    .matches{
      font-size: 150%;
    }
    .home-result, .visitor-result, .vs, .home-icon, .visitor-icon{
      width: 1px
    }
  </style>
</head>
<body>
  <div class="table-responsive">
    <table class="table"></table>
  </div>
</body>
<script type="text/javascript">
  $(document).ready(function(){
    country = {"ALE": "DE", "AGL": "DZ", "ARG": "AR", "AUS": "AU", "BEL": "BE", "BOS": "BA", "BRA": "BR", "CAM": "CM", "CHI": "CL", "COL": "CO", "COR": "KR", "CDM": "CI", "COS": "CR", "CRO": "HR", "EQU": "EC", "ESP": "ES", "EUA": "US", "FRA": "FR", "GAN": "GH", "GRE": "GR", "HOL": "NL", "HON": "HN", "ING": "GB", "IRA": "IR", "ITA": "IT", "JAP": "JP", "MEX": "MX", "NGA": "NG", "POR": "PT", "RUS": "RU", "SUI": "CH", "URU": "UY"}
    full_names = {"AF": "Afeganist\u00e3o", "AL": "Alb\u00e2nia", "DE": "Alemanha", "AD": "Andorra", "AO": "Angola", "AI": "Anguilha", "AN": "Antilhas Holandesas", "AQ": "Ant\u00e1rctica", "AG": "Ant\u00edgua e Barbuda", "AR": "Argentina", "DZ": "Arg\u00e9lia", "AM": "Arm\u00e9nia", "AW": "Aruba", "SA": "Ar\u00e1bia Saudita", "AU": "Austr\u00e1lia", "AZ": "Azerbeij\u00e3o", "BS": "Baamas", "BH": "Bahrein", "BD": "Bangladeche", "BB": "Barbados", "BZ": "Belize", "BJ": "Benim", "BM": "Bermudas", "BY": "Bielorr\u00fassia", "BO": "Bol\u00edvia", "BW": "Botswana", "BR": "Brasil", "BN": "Brunei", "BG": "Bulg\u00e1ria", "BF": "Burkina-Faso", "BI": "Burundi", "BT": "But\u00e3o", "BE": "B\u00e9lgica", "BA": "B\u00f3snia-Herzegovina", "CV": "Cabo Verde", "KH": "Camboja", "CA": "Canad\u00e1", "KZ": "Cazaquist\u00e3o", "TD": "Chade", "CL": "Chile", "CN": "China", "CY": "Chipre", "CO": "Col\u00f4mbia", "KM": "Comores", "CG": "Congo-Brazzaville", "KP": "Coreia do Norte", "KR": "Coreia do Sul", "CR": "Costa Rica", "CI": "Costa do Marfim", "HR": "Cro\u00e1cia", "KW": "Cuaite", "CU": "Cuba", "DK": "Dinamarca", "DJ": "Djibuti", "DM": "Dominica", "EG": "Egipto", "SV": "El Salvador", "AE": "Emiratos \u00c1rabes Unidos", "EC": "Equador", "ER": "Eritreia", "SK": "Eslov\u00e1quia", "SI": "Eslov\u00e9nia", "ES": "Espanha", "FM": "Estados Federados da Micron\u00e9sia", "US": "Estados Unidos", "EE": "Est\u00f3nia", "SJ": "Esvalbarda e Jan Mayen", "ET": "Eti\u00f3pia", "FJ": "Fiji", "PH": "Filipinas", "FI": "Finl\u00e2ndia", "FR": "Fran\u00e7a", "GA": "Gab\u00e3o", "GH": "Gana", "GE": "Ge\u00f3rgia", "GS": "Ge\u00f3rgia do Sul e Ilhas Sandwich do Sul", "GI": "Gibraltar", "GD": "Granada", "GL": "Gronel\u00e2ndia", "GR": "Gr\u00e9cia", "GP": "Guadalupe", "GU": "Guam", "GT": "Guatemala", "GG": "Guernsey", "GY": "Guiana", "GF": "Guiana Francesa", "GN": "Guin\u00e9", "GQ": "Guin\u00e9 Equatorial", "GW": "Guin\u00e9-Bissau", "GM": "G\u00e2mbia", "HT": "Haiti", "HN": "Honduras", "HK": "Hong Kong - Regi\u00e3o Administrativa Especial da China", "HU": "Hungria", "BV": "Ilha Bouvet", "HM": "Ilha Heard e Ilhas McDonald", "NF": "Ilha Norfolque", "IM": "Ilha de Man", "CX": "Ilha do Natal", "AX": "Ilhas Alanda", "KY": "Ilhas Caim\u00e3o", "CC": "Ilhas Cocos", "CK": "Ilhas Cook", "FK": "Ilhas Falkland ou Malvinas", "FO": "Ilhas Faro\u00e9", "MP": "Ilhas Mariana do Norte", "MH": "Ilhas Marshall", "UM": "Ilhas Minor Outlying (E.U.A)", "SB": "Ilhas Salom\u00e3o", "TC": "Ilhas Turcas e Caicos", "VG": "Ilhas Virgens Brit\u00e2nicas", "VI": "Ilhas Virgin E.U.A.", "ID": "Indon\u00e9sia", "IQ": "Iraque", "IE": "Irlanda", "IR": "Ir\u00e3o", "IS": "Isl\u00e2ndia", "IL": "Israel", "IT": "It\u00e1lia", "YE": "I\u00e9men", "JM": "Jamaica", "JP": "Jap\u00e3o", "JE": "Jersey", "JO": "Jord\u00e2nia", "LA": "Laos, Rep\u00fablica Popular Democr\u00e1tica do", "LS": "Lesoto", "LV": "Let\u00f3nia", "LR": "Lib\u00e9ria", "LI": "Liechtenstein", "LT": "Litu\u00e2nia", "LU": "Luxemburgo", "LB": "L\u00edbano", "LY": "L\u00edbia", "MO": "Macau - Regi\u00e3o Administrativa Especial da China", "MK": "Maced\u00f3nia, Rep\u00fablica da", "MG": "Madag\u00e1scar", "MW": "Malaui", "MV": "Maldivas", "ML": "Mali", "MT": "Malta", "MY": "Mal\u00e1sia", "MA": "Marrocos", "MQ": "Martinica", "MR": "Maurit\u00e2nia", "MU": "Maur\u00edcias", "YT": "Mayotte", "MM": "Mianmar", "MD": "Mold\u00e1via, Rep\u00fablica da", "MN": "Mong\u00f3lia", "MS": "Monserrate", "ME": "Montenegro", "MZ": "Mo\u00e7ambique", "MX": "M\u00e9xico", "MC": "M\u00f3naco", "NA": "Nam\u00edbia", "NR": "Nauru", "NP": "Nepal", "NI": "Nicar\u00e1gua", "NG": "Nig\u00e9ria", "NU": "Niue", "NO": "Noruega", "NC": "Nova Caled\u00f3nia", "NZ": "Nova Zel\u00e2ndia", "NE": "N\u00edger", "OM": "Om\u00e3", "PW": "Palau", "PA": "Panam\u00e1", "PG": "Papua Nova Guin\u00e9", "PK": "Paquist\u00e3o", "PY": "Paraguai", "NL": "Pa\u00edses Baixos", "PE": "Peru", "PN": "Pitcairn", "PF": "Polin\u00e9sia Francesa", "PL": "Pol\u00f3nia", "PR": "Porto Rico", "PT": "Portugal", "QA": "Qatar", "KG": "Quirguizist\u00e3o", "KI": "Quiribati", "KE": "Qu\u00e9nia", "ZZ": "Regi\u00e3o desconhecida ou inv\u00e1lida", "GB": "Reino Unido", "CF": "Rep\u00fablica Centro-Africana", "CZ": "Rep\u00fablica Checa", "CD": "Rep\u00fablica Democr\u00e1tica do Congo", "DO": "Rep\u00fablica Dominicana", "CM": "Rep\u00fablica dos Camar\u00f5es", "RE": "Reuni\u00e3o", "RO": "Rom\u00e9nia", "RW": "Ruanda", "RU": "R\u00fassia", "KN": "Saint Kitts e Nevis", "PM": "Saint Pierre e Miquelon", "WS": "Samoa", "AS": "Samoa Americana", "SH": "Santa Helena", "LC": "Santa L\u00facia", "EH": "Sara Ocidental", "SC": "Seicheles", "SN": "Senegal", "SL": "Serra Leoa", "SG": "Singapura", "SO": "Som\u00e1lia", "LK": "Sri Lanka", "SZ": "Suazil\u00e2ndia", "SD": "Sud\u00e3o", "SR": "Suriname", "SE": "Su\u00e9cia", "CH": "Su\u00ed\u00e7a", "BL": "S\u00e3o Bartolomeu", "SM": "S\u00e3o Marino", "MF": "S\u00e3o Martinho", "ST": "S\u00e3o Tom\u00e9 e Pr\u00edncipe", "VC": "S\u00e3o Vicente e Granadinas", "RS": "S\u00e9rvia", "CS": "S\u00e9rvia e Montenegro", "SY": "S\u00edria", "TH": "Tail\u00e2ndia", "TW": "Taiwan", "TJ": "Tajiquist\u00e3o", "TZ": "Tanz\u00e2nia", "IO": "Territ\u00f3rio Brit\u00e2nico do Oceano \u00cdndico", "PS": "Territ\u00f3rio Palestiniano", "TF": "Territ\u00f3rios Franceses do Sul", "TL": "Timor Leste", "TG": "Togo", "TO": "Tonga", "TK": "Toquelau", "TT": "Trindade e Tobago", "TN": "Tun\u00edsia", "TM": "Turquemenist\u00e3o", "TR": "Turquia", "TV": "Tuvalu", "UA": "Ucr\u00e2nia", "UG": "Uganda", "UY": "Uruguai", "UZ": "Usbequist\u00e3o", "VU": "Vanuatu", "VA": "Vaticano", "VE": "Venezuela", "VN": "Vietname", "WF": "Wallis e Futuna", "ZW": "Zimbabwe", "ZM": "Z\u00e2mbia", "ZA": "\u00c1frica do Sul", "AT": "\u00c1ustria", "IN": "\u00cdndia"}

    $.ajax({
      url: 'https://diegurm-centraldacopa.p.mashape.com/jogos',
      type: 'GET',
      datatype: 'json',
      beforeSend: function (xhr) {xhr.setRequestHeader("X-Mashape-Authorization", "KnO5YrIwF7k8xi4d0UAlJfNls23YPOob");},
      error: function (err) {console.log(err);},
      success: function (data) {
        data.jogos.forEach(function(jogo){
          date_hour = moment(Date.parse(jogo.data+" "+jogo.hora))
          mandante = jogo.mandante
          visitante = jogo.visitante
          abbr_name_mandante = mandante
          abbr_name_visitante = visitante

          if(country.hasOwnProperty(mandante))
            abbr_name_mandante = country[jogo.mandante].toLocaleLowerCase()
          if(country.hasOwnProperty(visitante))
            abbr_name_visitante = country[jogo.visitante].toLocaleLowerCase()

          if(full_names.hasOwnProperty(abbr_name_mandante.toUpperCase()))
            mandante = full_names[abbr_name_mandante.toUpperCase()]
          if(full_names.hasOwnProperty(abbr_name_visitante.toUpperCase()))
            visitante = full_names[abbr_name_visitante.toUpperCase()]

          $('table.table').append(
            "<tr class='matches'>"+
              "<td class='when'>"+date_hour.calendar()+"</td>" +
              "<td class='where'>"+jogo.estadio.estadio+" - "+jogo.estadio.local+"</td>" +
              "<td class='home-icon'><span class='flag-icon flag-icon-squared flag-icon-"+abbr_name_mandante+" img-circle'></span></td>" +
              "<td class='home-name'>"+mandante+"</td>" +
              "<td class='home-result'><span class='label label-default'>"+jogo.mandanteresultado+"</span></td>" +
              "<td class='vs'>X</td>" +
              "<td class='visitor-result'><span class='label label-default'>"+jogo.vistanteresultado+"</span></td>" +
              "<td class='visitor-name'>"+visitante+"</td>" +
              "<td class='visitor-icon'><span class='flag-icon flag-icon-squared flag-icon-"+abbr_name_visitante+" img-circle'></span></td>" +
            "</tr>"
          )
        });
      }
    });
  })
</script>
</html>